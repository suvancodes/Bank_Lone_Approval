<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Loan Eligibility - Demo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-dark text-light">
  <div class="container py-5">
    <div class="card bg-transparent border-0 mx-auto" style="max-width:900px">
      <div class="card-body bg-secondary bg-opacity-10 p-4 rounded">
        <h3 class="mb-3">Bank Loan Approval â€” Demo</h3>

        <form id="predictForm" class="row g-3">
          <div class="col-12">
            <label class="form-label">Bank Name</label>
            <select id="Bank_Name" class="form-select" required>
              <option value="" disabled selected>Select bank</option>
              <option value="SBI bank">SBI bank</option>
              <option value="AXIX bank">AXIX bank</option>
              <option value="HDFC bank">HDFC bank</option>
              <option value="Others">Others</option>
            </select>
          </div>

          <div class="col-md-3">
            <label class="form-label">Gender</label>
            <select id="Gender" class="form-select" required>
              <option value="1">Male (1)</option>
              <option value="0">Female (0)</option>
            </select>
          </div>

          <div class="col-md-3">
            <label class="form-label">Married</label>
            <select id="Married" class="form-select" required>
              <option value="1">Yes (1)</option>
              <option value="0">No (0)</option>
            </select>
          </div>

          <div class="col-md-3">
            <label class="form-label">Education</label>
            <select id="Education" class="form-select" required>
              <option value="1">Graduate (1)</option>
              <option value="0">Not Graduate (0)</option>
            </select>
          </div>

          <div class="col-md-3">
            <label class="form-label">Self Employed</label>
            <select id="Self_Employed" class="form-select" required>
              <option value="0">No (0)</option>
              <option value="1">Yes (1)</option>
            </select>
          </div>

          <div class="col-md-4">
            <label class="form-label">Applicant Income</label>
            <input id="ApplicantIncome" class="form-control" type="number" step="any" placeholder="5000" required/>
          </div>

          <div class="col-md-4">
            <label class="form-label">Coapplicant Income</label>
            <input id="CoapplicantIncome" class="form-control" type="number" step="any" placeholder="0" required/>
          </div>

          <div class="col-md-4">
            <label class="form-label">Loan Amount</label>
            <input id="LoanAmount" class="form-control" type="number" step="any" placeholder="128" required/>
          </div>

          <div class="col-md-6">
            <label class="form-label">Loan Term (months)</label>
            <input id="Loan_Amount_Term" class="form-control" type="number" step="any" placeholder="360" required/>
          </div>

          <div class="col-md-6">
            <label class="form-label">Credit History</label>
            <select id="Credit_History" class="form-select" required>
              <option value="1">Good (1)</option>
              <option value="0">Bad (0)</option>
            </select>
          </div>

          <div class="col-12 text-end">
            <button id="submitBtn" class="btn btn-primary">Predict</button>
          </div>
        </form>

        <div id="result" class="mt-4" style="display:none">
          <h5>Prediction: <span id="resultLabel" class="badge bg-success">Approved</span></h5>
        </div>
      </div>
    </div>
  </div>

  <script>
    // TODO: replace BACKEND_URL with your Render service URL after deploy
    const BACKEND_URL = "https://<YOUR-RENDER-SERVICE>.onrender.com/predict";

    document.getElementById('predictForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const payload = {
        Bank_Name: document.getElementById('Bank_Name').value,
        Gender: document.getElementById('Gender').value,
        Married: document.getElementById('Married').value,
        Education: document.getElementById('Education').value,
        Self_Employed: document.getElementById('Self_Employed').value,
        ApplicantIncome: document.getElementById('ApplicantIncome').value,
        CoapplicantIncome: document.getElementById('CoapplicantIncome').value,
        LoanAmount: document.getElementById('LoanAmount').value,
        Loan_Amount_Term: document.getElementById('Loan_Amount_Term').value,
        Credit_History: document.getElementById('Credit_History').value
      };

      const btn = document.getElementById('submitBtn');
      btn.disabled = true;
      btn.textContent = 'Predicting...';

      try {
        const res = await fetch(BACKEND_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });
        if (!res.ok) throw new Error('Request failed');
        const data = await res.json();
        const label = data?.result?.label || data?.label || (data?.prediction === 1 ? 'Approved' : 'Rejected');
        document.getElementById('resultLabel').textContent = label;
        document.getElementById('resultLabel').className = 'badge ' + (String(label).toLowerCase().includes('approve') ? 'bg-success' : 'bg-danger');
        document.getElementById('result').style.display = 'block';
      } catch (err) {
        alert('Prediction failed: ' + err.message);
      } finally {
        btn.disabled = false;
        btn.textContent = 'Predict';
      }
    });
  </script>
</body>
</html>

venv
venv/
